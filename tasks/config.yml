---

- name: Combine file lists
  set_fact:
    cron_tasks_combined: "{{ cron_tasks + cron_group_tasks + cron_host_tasks | default([]) }}"

- name: Configuring cron tasks
  cron:
    cron_file:    "{{ item.cron_file    | default(omit) }}"
    day:          "{{ item.day          | default(omit) }}"
    hour:         "{{ item.hour         | default(omit) }}"
    job:          "{{ item.job          | default(omit) }}"
    minute:       "{{ item.minute       | default(omit) }}"
    month:        "{{ item.month        | default(omit) }}"
    name:         "{{ item.name         | default(item) }}"
    special_time: "{{ item.special_time | default(omit) }}"
    state:        "{{ item.state        | default(omit) }}"
    user:         "{{ item.user         | default(omit) }}"
    weekday:      "{{ item.weekday      | default(omit) }}"
  with_items: cron_tasks_combined
